<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <script src="main.js"></script>
</head>

<body>
    <script>
        var selected = "";

        function ShowSpeciesNav() {
            document.getElementById("speciesNav").style.width = "6vw";
        }

        function CloseLogin(){
            document.getElementById("login").style.visibility = "hidden"
        }

        function ShowLogin(){
            document.getElementById("login").style.visibility = "visible"
        }

        //Used to hide species when scrolling through 
        function HideSpeciesNavMain(elem) {
            var overSpeciesMenu = false;
            var sideLeft = closestEdge(elem);

            if (selected != "species" && sideLeft != "right") {
                document.getElementById("speciesNav").style.width = "0";
            }
        }

        //Used to hide species when you leave the sub menu
        function HideSpeciesNavSub() {
            var overSpeciesMenu = false;

            if (selected != "species") {
                document.getElementById("speciesNav").style.width = "0";
            }
        }
        
        function ShowDisturbanceNav() {
            document.getElementById("disturbanceNav").style.width = "6vw";
            document.getElementById('search').style.borderBottomRightRadius = '0';
        }

        //Used to hide disturbances when scrolling through 
        function HideDisturbanceNavMain(elem) {
            var overSpeciesMenu = false;
            var sideLeft = closestEdge(elem);

            if (selected != "disturbance" && sideLeft != "right") {
                document.getElementById("disturbanceNav").style.width = "0";
                document.getElementById('search').style.borderBottomRightRadius = '';
            }
        }

        //Used to hide disturbances when you leave the sub menu
        function HideDisturbanceNavSub() {
            var overSpeciesMenu = false;

            if (selected != "disturbance") {
                document.getElementById("disturbanceNav").style.width = "0";
                document.getElementById('search').style.borderBottomRightRadius = '';
            }
        }
        
        
        function ShowActivitiesNav() {
            document.getElementById("activitiesNav").style.width = "6vw";
            //document.getElementById("wind").style.borderTopRightRadius = "0";
            document.getElementById("human").style.borderBottomRightRadius = "0";
        }

        //Used to hide human activities when scrolling through 
        function HideActivitiesNavMain(elem) {
            var overSpeciesMenu = false;
            var sideLeft = closestEdge(elem);

            if (selected != "activities" && sideLeft != "right") {
                document.getElementById("activitiesNav").style.width = "0";
               // document.getElementById("wind").style.borderTopRightRadius = "";
                document.getElementById("human").style.borderBottomRightRadius = "";
            
            }
            
        }

        //Used to hide human activities when you leave the sub menu
        function HideActivitiesNavSub() {
            var overSpeciesMenu = false;

            if (selected != "activities") {
                setTimeout(ShouldHideDisturbace(), 100);
            }
        }

        function ShouldHideDisturbace(){
            var x = event.clientX;
            var y = event.clientY;

            var elements = document.elementsFromPoint(x, y);

            var shouldHide = true;
            for(i = 0; i < elements.length; i++){
                console.log(elements[i].id);
                if(elements[i].id == "human"){
                    shouldHide = false;
                }
            }

            console.log(shouldHide);
            if(shouldHide == true){
                HideDisturbanceNavSub();
                document.getElementById("activitiesNav").style.transition = "0.0s";
                document.getElementById("activitiesNav").style.width = "0";
            }
            else{
                document.getElementById("activitiesNav").style.transition = "0.1s";
                document.getElementById("activitiesNav").style.width = "0";
            }
        }

        function HideSsNavSub() {
            var overSpeciesMenu = false;

            if (selected != "species") {
                document.getElementById("speciesNav").style.width = "0";
            }
        }
        
        function activateStatButton(){
            var element = document.getElementById("statButton");
            element.classList.add("active")
            document.getElementById("deepButton").classList.remove("active");
            document.getElementById("statDiv").style.height = "";
            document.getElementById("deepDiv").style.height = "0";
        }
        
        function activateDeepButton(){
            var element = document.getElementById("deepButton");
            element.classList.add("active");
            document.getElementById("statButton").classList.remove("active");
            document.getElementById("statDiv").style.height = "0";
            document.getElementById("deepDiv").style.height = "15vh";
        }
        

        function closestEdge(elem) {
            var elemBounding = elem.getBoundingClientRect();

            var elementLeftEdge = elemBounding.left;
            var elementTopEdge = elemBounding.top;
            var elementRightEdge = elemBounding.right;
            var elementBottomEdge = elemBounding.bottom;

            var mouseX = event.clientX;
            var mouseY = event.clientY;

            var topEdgeDist = Math.abs(elementTopEdge - mouseY);
            var bottomEdgeDist = Math.abs(elementBottomEdge - mouseY);
            var leftEdgeDist = Math.abs(elementLeftEdge - mouseX);
            var rightEdgeDist = Math.abs(elementRightEdge - mouseX);

            var min = Math.min(topEdgeDist, bottomEdgeDist, leftEdgeDist, rightEdgeDist);

            switch (min) {
                case leftEdgeDist:
                    return "left";
                case rightEdgeDist:
                    return "right";
                case topEdgeDist:
                    return "top";
                case bottomEdgeDist:
                    return "bottom";
            }
        }
    </script>
    <div class='row main'>
        <div class='col-4 main'>
            <div class='row main'>
                <div id='navigation' class='col-2'>
                    <nav class='navbar main'>
                        <ul class='navbar-nav'>
                            <li class='nav-item'>
                                <button class='nav-link btn navButton top logo'>
                                    <img class='navImg logo' src='pictures/logo.png'>LEAF</img>
                                </button>
                            </li>
                            <li class='nav-item'>
                                <button id='species' class='nav-link btn navButton mid' onmouseover="ShowSpeciesNav()"
                                    onmouseleave="HideSpeciesNavMain(this)">
                                    <img class='navImg' src='pictures/species.png'>Species</img>
                                </button>
                            </li>
                            <li class='nav-item'>
                                <button class='nav-link btn navButton mid' onmouseover="ShowDisturbanceNav()"
                                    onmouseleave="HideDisturbanceNavMain(this)">
                                    <img class='navImg' src='pictures/disturbance.png'>Disturbance</img>
                                </button>
                            </li>
                            <li class='nav-item'>
                                <button class='nav-link btn navButton mid'>
                                    <img class='navImg' src='pictures/carbonstock.png'>Carbon Stock</img>
                                </button>
                            </li>
                            <li class='nav-item'>
                                <button id='search' class='nav-link btn navButton bottom'>
                                    <img class='navImg' src='pictures/userLogo.png' onclick="ShowLogin()">Login</img>
                                </button>
                            </li>
                        </ul>
                    </nav>
                </div>
                <div id='sub-menu' class='col-2'>
                    <div id='speciesNav' onmouseleave="HideSpeciesNavSub()">
                        <nav class='navbar main'>
                            <ul class='navbar-nav'>
                                <li class='nav-item'>
                                    <button class='nav-link btn subButton top sub'>
                                        <img class='navImg logo' src='pictures/growingSpaceIcon.png'>Growing Space</img>
                                    </button>
                                </li>
                                <li class='nav-item'>
                                    <button class='nav-link btn subButton mid sub'>
                                        <img class='navImg logo' src='pictures/basalarea.png'>Basal Area</img>
                                    </button>
                                </li>
                                <li class='nav-item'>
                                    <button class='nav-link btn subButton bottom'>
                                        <img class='navImg logo' src='pictures/biomassIcon.png'>Biomass</img>
                                    </button>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div id='disturbanceNav' onmouseleave="HideDisturbanceNavSub()">
                        <nav class='navbar main'>
                            <ul class='navbar-nav'>
                                <li class='nav-item'>
                                    <button id='wind' class='nav-link btn subButton top'>
                                        <img class='navImg logo' src='pictures/windIcon.png'>Wind</img>
                                    </button>
                                </li>
                                <li class='nav-item'>
                                    <button class='nav-link btn subButton mid'>
                                        <img class='navImg logo' src='pictures/fire.png'>Fire</img>
                                    </button>
                                </li>
                                <li class='nav-item'>
                                    <button id='human' class='nav-link btn subButton bottom' onmouseover="ShowActivitiesNav()"
                                        onmouseleave="HideActivitiesNavMain(this)">
                                        <img class='navImg logo' src='pictures/humanIcon.png'>Human Activities</img>
                                    </button>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

                <div id='sub-menu-1' class='col-2'>
                    <div id='activitiesNav' onmouseover="ShowDisturbanceNav()" onmouseleave="HideActivitiesNavSub() ">
                        <nav class='navbar main'>
                            <ul class='navbar-nav'>
                                <li class='nav-item'>
                                    <button class='nav-link btn subButton1 top'>
                                        <img class='navImg logo' src='pictures/newHarvestIcon.png'>Harvest</img>
                                    </button>
                                </li>
                                <li class='nav-item'>
                                    <button class='nav-link btn subButton1 mid'>
                                        <img class='navImg logo' src='pictures/miningIcon.png'>Mining</img>
                                    </button>
                                </li>
                                <li class='nav-item'>
                                    <button class='nav-link btn subButton1 bottom'>
                                        <img class='navImg logo' src='pictures/huntingIcon.png'>Hunting</img>
                                    </button>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class='col-4 main'>
            <div id='login'>
                <div class='login-content'>
                    <div class='login-header'>
                        Login
                    </div>
                    
                    <div class='login-fields'>
                        <form>
                            <div class="input-group mb-3 input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">Email</span>
                                </div>
                                <input type="text" class="form-control">
                            </div>
                            <div class="input-group mb-3 input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">Password</span>
                                </div>
                                <input type="password" class="form-control">
                            </div>
                        </form>
                    </div>

                    <div class='login-btn-group'>
                        <button type='button' class='login-btn' onclick="CloseLogin()">Cancel</button>
                        <button type='button' class='login-btn' style='float: right'>Login</button>
                    </div>    
                </div>
            </div>
        </div>
        <div class='col-4 main'>
            <div class='analysis'>
                <button class='analysis-button' data-toggle='collapse' data-target='#analysis-box'>
                    <div class="row">
                        <div class='col-6'>Analysis</div>
                        <div class='col-6'><label style='float: right; font-weight: bolder;'>-</label></div>
                    </div>
                </button>
                <div id='analysis-box' class='collapse show'>
                    <div class='content'>
                        <div class='row buttonGroupOutter'>
                            <div class='col-6 buttonGroupInner'>
                                <button class='button left'>
                                    <img class='a-icon' src='pictures/select.png'>Select Region</img>
                                </button>
                            </div>
                            <div class='col-6 buttonGroupInner'>
                                <button class='button right'>
                                    <img class='a-icon' src='pictures/draw.png'>Draw Region</img>
                                </button>
                            </div>
                        </div>
                        <div class='row main'>
                            <div class='row main'>
                                <div class='col-6 parm-l'>
                                    <label class='parameter-label'>Start Date:</label><input class='time' type="date">
                                </div>
                                <div class='col-6 parm-r'>
                                    <label class='parameter-label'>End Date:</label><input class='time' type="date">
                                </div>
                            </div>

                        </div>
                        <br>
                        <div class='row main'>
                            <div class='btn-group graph'>
                                <button id="statButton" class='graph-button active' style='border-right-width: 0;' onclick="activateStatButton()">Statistic</button>
                                <button id="deepButton" class='graph-button' onclick="activateDeepButton()">Deep</button>
                            </div>
                        </div>
                        <div id="statDiv" class='row statistic'>
                            <div class="col-6 statistic">
                                <img class='graph' src='pictures/bargraphicon.png'></img>
                            </div>
                            <div class='col-6 statistic'>
                                <img class='graph' src='pictures/piecharticon.png'></img>
                            </div>
                        </div>
                        <div id="deepDiv" class='row deep'>     
                            <img class='deepgraph' src='pictures/deepLogo.png'></img>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>